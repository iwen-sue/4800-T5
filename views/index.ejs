<%- contentFor('body') %>
<div class="hero">
    <header class="absolute inset-x-0 top-0 z-50">
        <nav class="flex items-center justify-between p-6 lg:px-8">
            <div class="flex lg:flex-1">
                <a href="/" class="logo-link -m-1.5 p-1.5">
                  <span class="sr-only">Your Company</span>
                  <img class="h-12 w-auto" src="/images/logo.png" alt="Clippio">
                </a>
            </div>
            <div class="hidden lg:flex lg:flex-1 lg:justify-end">
                <a href="/login" class="text-sm/6 font-semibold text-white">Log in <span aria-hidden="true">&rarr;</span></a>
            </div>
            <!-- <a href="/login" class="btn">Login</a> -->
        </nav>
    </header>
    <div class="content relative isolate px-6 pt-10 lg:px-8">
        <div class="mx-auto max-w-2xl py-32 sm:py-48 lg:py-56">
            <div class="text-center">
                <h1 class="text-5xl font-extrabold tracking-normal sm:text-7xl text-[#cde8e8]" style="line-height: 1.3;">
                    Transfer your files with <span class="gradient-text">Clippio</span>
                </h1>
                <form class="w-[90%] max-w-[600px] h-[65px] bg-white mx-auto flex items-center rounded-full mt-10 mb-5">
                    <input type="text" class="text-black flex-1 px-[30px] py-[20px] text-[16px] border-0 outline-none bg-transparent" placeholder="Enter your 4 digit code">
                    <button type="submit" class="p-0 w-[150px] h-[65px] rounded-[31px] bg-gradient-to-b from-[#43c6ac] to-[#03333b] text-[#bbdede] text-[16px] border-0 outline-none cursor-pointer hover:bg-gradient-to-b hover:from-[#4ddbc0] hover:to-[#03333b]">Submit</button>
                </form>
            </div>
        </div>
    </div>
    <p class="absolute bottom-[20px] left-[20px] text-[14px] text-[#bbdede]">&copy; <%= new Date().getFullYear() %> Clippio</p>
</div>

<script>
    document.querySelector('form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const passcode = e.target[0].value;

        if (passcode.length !== 4 || isNaN(passcode)) {
            alert('Please enter a valid 4-digit code');
            return;
        }

        try {
            const response = await fetch('/verifyPasscode', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ passcode })
            });

            const result = await response.json();
            if (response.ok) {
                alert(result.message);
                window.location.href = '/upload-guest';
            } else {
                alert(result.error);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('An unexpected error occurred. Please try again later.');
        }
    });
</script>
